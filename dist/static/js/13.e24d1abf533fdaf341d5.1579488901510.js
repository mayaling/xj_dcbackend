webpackJsonp([13],{fkPZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("3cXf"),n=a.n(l);Vue.directive("loadmore",{bind:function(e,t){e.querySelector(".el-select-dropdown .el-select-dropdown__wrap").addEventListener("scroll",function(){this.scrollHeight-this.scrollTop<=this.clientHeight&&t.value()})}});var o={name:"teacher",data:function(){return{value1:"",value2:"",tableData:[],page:1,currentPage:1,totalCount:1,pageSizes:[3,5,10,20],PageSize:5,cur_page:1,pages:0,s_student:"",s_school:"",s_grade:"",s_klass:"",active:"",channel:"",channeldata:"",time:"",p_phone:"",start_time:"",end_time:"",pageCount:""}},created:function(){this.getlistdata(),this.getchanneldata()},mounted:function(){},computed:{},methods:{loadMore:function(){var e=this;console.log(2222);var t=this;t.page!=t.pageCount?(t.page++,this.$get("channels?sort=-id&page="+t.page).then(function(a){if(1===a.code)for(var l=0;l<a.info.items.length;l++)t.channeldata.push(a.info.items[l]);else e.$message.error("数据获取失败")}).catch(function(){e.loading=!1})):t.page=t.pageCount},getlistdata:function(){var e=this;this.$get("users?sort=-id").then(function(t){if(console.log(t),1===t.code){e.tableData=t.info.items,e.pages=t.info._meta.pageCount;for(var a=0;a<e.tableData.length;a++)0==e.tableData[a].active||null==e.tableData[a].active?e.tableData[a].active="未激活":2==e.tableData[a].active?e.tableData[a].active="自然用户":e.tableData[a].active=" 已激活";for(a=0;a<e.tableData.length;a++)0==e.tableData[a].os?e.tableData[a].os="Android":1==e.tableData[a].os?e.tableData[a].os="IOS":2==e.tableData[a].os?e.tableData[a].os="Web":4==e.tableData[a].os?e.tableData[a].os="其他":e.tableData[a].os=""}else e.$message.error("数据加载失败");e.loading=!1}).catch(function(){e.loading=!1})},getchanneldata:function(){var e=this;this.$get("channels?sort=-id").then(function(t){console.log(t),1===t.code?(e.channeldata=t.info.items,e.pageCount=t.info._meta.pageCount):e.$message.error("数据加载失败"),e.loading=!1}).catch(function(){e.loading=!1})},handleCurrentChange:function(e){var t=this;this.loading=!0,this.$get("users?sort=-id",{page:e,channel_id:this.channel?this.channel:"",active:this.active?this.active:"",start_time:this.start_time?this.start_time:"",end_time:this.end_time?this.end_time:"",mobile:this.p_phone?this.p_phone:""}).then(function(e){if(1===e.code){t.tableData=JSON.parse(n()(e.info.items)),t.pages=e.info._meta.pageCount;for(var a=0;a<t.tableData.length;a++)0==t.tableData[a].active||null==t.tableData[a].active?t.tableData[a].active="未激活":2==t.tableData[a].active?t.tableData[a].active="自然用户":t.tableData[a].active=" 已激活";for(a=0;a<t.tableData.length;a++)0==t.tableData[a].os?t.tableData[a].os="Android":1==t.tableData[a].os?t.tableData[a].os="IOS":2==t.tableData[a].os?t.tableData[a].os="Web":4==t.tableData[a].os?t.tableData[a].os="其他":t.tableData[a].os=""}else t.$message.error("数据加载失败");t.loading=!1}).catch(function(){t.loading=!1})},search:function(){var e=this;this.loading=!0,console.log(this.start_time),console.log(this.time),this.$get("users?sort=-id",{channel_id:this.channel?this.channel:"",active:this.active?this.active:"",mobile:this.p_phone?this.p_phone:"",start_time:this.time?this.time[0]:"",end_time:this.time?this.time[1]:""}).then(function(t){if(console.log(t),1===t.code){e.tableData=JSON.parse(n()(t.info.items)),e.pages=t.info._meta.pageCount;for(var a=0;a<e.tableData.length;a++)0==e.tableData[a].active||null==e.tableData[a].active?e.tableData[a].active="未激活":2==e.tableData[a].active?e.tableData[a].active="自然用户":e.tableData[a].active=" 已激活";for(a=0;a<e.tableData.length;a++)0==e.tableData[a].os?e.tableData[a].os="Android":1==e.tableData[a].os?e.tableData[a].os="IOS":2==e.tableData[a].os?e.tableData[a].os="Web":4==e.tableData[a].os?e.tableData[a].os="其他":e.tableData[a].os=""}else e.$message.error("数据加载失败");e.loading=!1}).catch(function(){e.loading=!1})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"container-title"},[e._v("犀金用户列表")]),e._v(" "),a("div",{staticClass:"mgb20"},[a("a",{attrs:{href:"http://api-backend.loan.xykj1.com/user/get-excel-data?start_time="+e.time[0]+"&end_time="+e.time[1],target:"_blank"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"}},[e._v("导出")])],1),e._v(" "),a("el-row",{staticStyle:{float:"right"}},[a("el-col",{attrs:{span:3}},[a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],attrs:{placeholder:"渠道",clearable:"true"},on:{change:e.search},model:{value:e.channel,callback:function(t){e.channel=t},expression:"channel"}},[e._l(e.channeldata,function(e){return[a("el-option",{attrs:{label:e.name,value:e.id}})]})],2)],1),e._v(" "),a("el-col",{attrs:{span:3,offset:"1"}},[a("el-select",{attrs:{placeholder:"状态",clearable:"true"},on:{change:e.search},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("el-option",{attrs:{label:"已激活",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"自然用户",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"未激活",value:"0"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3,offset:"1"}},[a("el-input",{attrs:{placeholder:"用户手机号",clearable:"true"},on:{change:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.p_phone,callback:function(t){e.p_phone="string"==typeof t?t.trim():t},expression:"p_phone"}})],1),e._v(" "),a("el-col",{attrs:{span:8,offset:"1"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},on:{change:e.search},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("el-col",{attrs:{span:2,offset:"1"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:e.tableData,border:"",size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"active",label:"是否激活",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"active_time",label:"激活时间",align:"center",width:"160px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"last_login_time",label:"最后登录时间",align:"center",width:"160px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device_id",label:"设备号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel_name",label:"渠道",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"klass",label:"版本号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"os",label:"设备系统",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"CPA",query:{id:t.row.id}}}},[a("el-button",{attrs:{size:"mini"}},[e._v("\n                                    CPA\n                                ")])],1),e._v(" "),a("router-link",{attrs:{to:{path:"active",query:{row:t.row}}}},[a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini"}},[e._v("\n                                    活跃日期\n                                ")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-count":e.pages},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var s=a("C7Lr")(o,i,!1,function(e){a("ly7U")},"data-v-a7ce805a",null);t.default=s.exports},ly7U:function(e,t){}});