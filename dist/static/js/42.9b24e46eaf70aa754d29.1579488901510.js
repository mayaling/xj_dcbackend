webpackJsonp([42],{"3NrG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"addadmin",data:function(){return{form:{name:"",password:"",status:"",type:""},typedata:[{id:1,name:"管理员"},{id:2,name:"运营"}],statusdata:[{id:1,name:"开启"},{id:0,name:"关闭"}],tableData:"",id:"",data:"",rules:{name:[{required:!0,message:"不可为空！",trigger:"blur"}],status:[{required:!0,message:"不可为空！",trigger:["blur","change"]}],type:[{required:!0,message:"不可为空！",trigger:["blur","change"]}]}}},created:function(){this.id=this.$route.query.id,this.id&&this.getformdata()},computed:{},methods:{getformdata:function(){var t=this;this.$get("admins/"+this.id).then(function(e){console.log(e),1===e.code?(t.tableData=e.info,console.log(t.tableData),console.log(t.tableData),t.form=t.tableData,t.loading=!1):t.$message.error("数据加载失败")}).catch(function(){t.loading=!1})},onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.error("请完善红色提醒内容"),!1;e.$post("admins",{name:e.form.name,type:e.form.type,password:e.form.password,status:e.form.status}).then(function(t){1===t.code?(e.$message({message:t.message,type:"success"}),e.$router.push("/adminlist")):t.info.name?e.$message.error(t.info.name[0]):e.$message.error(t.message)})})},onEdit:function(t){var e=this;console.log(this.form),console.log(this.form.status),console.log(this.form.type),this.$refs[t].validate(function(t){if(!t)return!1;e.$put("admins/"+e.id,{name:e.form.name,password:e.form.password,type:e.form.type,status:e.form.status}).then(function(t){1===t.code?(e.$message({message:t.message,type:"success"}),e.$router.push("/adminlist")):e.$message.error(t.message)})})},resetForm:function(t){this.$refs[t].resetFields()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table",attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"container-title"},[t._v("新增用户")]),t._v(" "),a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:6}},[a("el-form",{ref:"form",staticClass:"item-add-list",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"账号:",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码:",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"==typeof e?e.trim():e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分组:",prop:"type"}},[a("el-select",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._l(t.typedata,function(t){return[a("el-option",{attrs:{label:t.name,value:t.id}})]})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态:",prop:"status"}},[a("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._l(t.statusdata,function(t){return[a("el-option",{attrs:{label:t.name,value:t.id}})]})],2)],1),t._v(" "),t.tableData?t._e():a("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("提交")]),t._v(" "),t.tableData?a("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:function(e){return t.onEdit("form")}}},[t._v("保存")]):t._e(),t._v(" "),a("router-link",{attrs:{to:{path:"adminlist"}}},[a("el-button",{attrs:{type:"primary"}},[t._v("取消")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}}),t._v(" "),a("el-col",{attrs:{span:6}})],1)],1)])},staticRenderFns:[]};var o=a("C7Lr")(s,r,!1,function(t){a("Psxe")},"data-v-24d28124",null);e.default=o.exports},Psxe:function(t,e){}});