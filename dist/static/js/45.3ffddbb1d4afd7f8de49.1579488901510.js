webpackJsonp([45],{"c/PM":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("3cXf"),s=r.n(o),n={data:function(){return{loading:!1,ruleForm:{type:"",username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;localStorage.setItem("token",""),t.loading=!0,t.$post("get-access-token",{name:t.ruleForm.username,password:t.ruleForm.password}).then(function(e){console.log(e),1===e.code?(localStorage.setItem("token",e.info.access_token),t.token=localStorage.getItem("token"),t.$get("admin/info",{access_token:t.token}).then(function(e){console.log(e),1===e.code?(localStorage.setItem("userInfo",s()(e.info)),t.$router.push("/Dashboard")):t.$message.error(e.message),t.loading=!1}).catch(function(){t.loading=!1})):t.$message.error(e.message),t.loading=!1}).catch(function(){t.loading=!1})})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("div",{staticClass:"ms-login-right"},[r("div",{staticClass:"login-title"},[e._v("犀金")]),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"0px"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{staticClass:"login-input",attrs:{placeholder:"用户名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}},[r("i",{staticClass:"el-input__icon el-icon-lx-people",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{staticClass:"login-input",attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}},[r("i",{staticClass:"el-input__icon el-icon-lx-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),r("div",{staticClass:"login-btn"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var l=r("C7Lr")(n,a,!1,function(e){r("fvms")},"data-v-1056ea3a",null);t.default=l.exports},fvms:function(e,t){}});