webpackJsonp([47],{"O/Ww":function(e,t){},RF1p:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"addadmin",data:function(){return{uploadurl:"http://api-backend.loan.xykj1.com/",showweb:!1,showid:!1,imageList:"",imageurl1:"",ossdata:"",form:{name:"",password:"",status:"",type:"",article_id:"",web_url:"",url:"",sort_num:""},id:"",data:""}},created:function(){this.id=this.$route.query.id,this.id&&(this.getformdata(),this.imageshow=!0)},computed:{},methods:{checktype:function(){2===this.form.type?(this.showweb=!0,this.showid=!1):(this.showid=!0,this.showweb=!1)},uploadfile:function(e){var t=this;this.imageUrl1=URL.createObjectURL(e.file),this.fileData=e.file,console.log(this.fileData);var a=new FormData;a.append("file",this.fileData),axios({method:"post",url:this.uploadurl+"upload-to-aliyun_oss?type=product",data:a,config:{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}}).then(function(e){console.log(e),1==e.data.code?(t.imageurl1=e.data.info.url,t.$message({message:"上传成功",type:"success"})):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.message)})},getformdata:function(){var e=this;this.$get("boutique-backgrounds/"+this.id).then(function(t){console.log(t),1===t.code?(e.tableData=t.info.items[0],2===e.tableData.type?e.showweb=!0:e.showid=!0,e.form=e.tableData,e.loading=!1):e.$message.error("数据加载失败")}).catch(function(){e.loading=!1})},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请完善红色提醒内容"),!1;t.$post("boutique-backgrounds",{url:t.imageurl1?t.imageurl1:t.tableData.url,sort_num:t.form.sort_num}).then(function(e){console.log(e),1===e.code?(t.$message({message:e.message,type:"success"}),t.$router.push("/dcbanner")):e.info.name?t.$message.error(e.info.name[0]):t.$message.error(e.message)})})},onEdit:function(e){var t=this;console.log(this.form),this.$refs[e].validate(function(e){if(!e)return!1;t.$put("boutique-backgrounds/"+t.id,{url:t.imageurl1?t.imageurl1:t.tableData.url,sort_num:t.form.sort_num}).then(function(e){1===e.code?(t.$message({message:e.message,type:"success"}),t.$router.push("/dcbanner")):t.$message.error(e.message)})})},resetForm:function(e){this.$refs[e].resetFields()},imgChange:function(e,t){this.hideUpload=t.length>=this.limitCount,t&&this.$refs.uploadElemet.clearValidate()},handleRemove1:function(e,t){console.log(e,t),this.hideUpload=t.length>=this.limitCount},handleChange1:function(e,t){console.log(111),this.fileList1=t.slice(-1),this.imageshow=!1,console.log(this.imageshow)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"container-title"},[e._v("贷超banner背景图")]),e._v(" "),a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:6}},[a("el-form",{ref:"form",staticClass:"item-add-list",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{ref:"uploadElemet",attrs:{prop:"imageList"}},[a("el-upload",{staticClass:"upload-demo1",attrs:{"on-preview":e.handlePreview1,"on-remove":e.handleRemove1,"file-list":e.fileList1,"list-type":"picture","on-change":e.handleChange1,"http-request":e.uploadfile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传bang背景图")]),e._v(" "),a("span",[e._v("(尺寸)")])],1),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.imageurl1,callback:function(t){e.imageurl1="string"==typeof t?t.trim():t},expression:"imageurl1"}}),e._v(" "),e.imageshow?a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.form.url,alt:""}}):e._e()],1),e._v(" "),e.tableData?e._e():a("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提交")]),e._v(" "),e.tableData?a("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:function(t){return e.onEdit("form")}}},[e._v("保存")]):e._e(),e._v(" "),a("router-link",{attrs:{to:{path:"dcbanner"}}},[a("el-button",{attrs:{type:"primary"}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}}),e._v(" "),a("el-col",{attrs:{span:6}})],1)],1)])},staticRenderFns:[]};var o=a("C7Lr")(s,i,!1,function(e){a("O/Ww")},"data-v-061a16ee",null);t.default=o.exports}});