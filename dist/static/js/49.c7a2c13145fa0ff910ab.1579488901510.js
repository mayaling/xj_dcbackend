webpackJsonp([49],{wILC:function(t,e){},zQGo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),o=a.n(n),s=a("a3Yh"),r=a.n(s),i=a("urnN"),l=a.n(i);Vue.use(l.a);var c={name:"teacher",data:function(){return r()({dialogVisible:!1,p_name:"",status:"",value1:"",value2:"",tableData:[],currentPage:1,totalCount:1,pageSizes:[3,5,10,20],PageSize:5,cur_page:1,channelurl:"c.loan.xykj1.com",pages:0,s_student:"",s_school:"",s_grade:"",s_klass:"",region:"",region1:""},"tableData","")},created:function(){this.getlistdata()},computed:{},methods:{getlistdata:function(){var t=this;this.$get("channels?sort=-id&status=1").then(function(e){if(console.log(e),1===e.code){t.tableData=e.info.items,t.pages=e.info._meta.pageCount;for(var a=0;a<t.tableData.length;a++)1==t.tableData[a].cooperation_type?t.tableData[a].cooperation_type="UV":2==t.tableData[a].cooperation_type?t.tableData[a].cooperation_type="注册":3==t.tableData[a].cooperation_type?t.tableData[a].cooperation_type="激活":t.tableData[a].cooperation_type="其他"}else t.$message.error("数据加载失败");t.loading=!1}).catch(function(){t.loading=!1})},handleCurrentChange:function(t){var e=this;this.loading=!0,this.$get("channels?sort=-id",{page:t,status:this.status?this.status:"",name:this.p_name?this.p_name:""}).then(function(t){1===t.code?(e.tableData=JSON.parse(o()(t.info.items)),e.pages=t.info._meta.pageCount):e.$message.error("数据加载失败"),e.loading=!1}).catch(function(){e.loading=!1})},search:function(){var t=this;this.loading=!0,this.$get("channels?sort=-id",{status:this.status?this.status:"",name:this.p_name?this.p_name:""}).then(function(e){1===e.code?(t.tableData=JSON.parse(o()(e.info.items)),t.pages=e.info._meta.pageCount):t.$message.error("数据加载失败"),t.loading=!1}).catch(function(){t.loading=!1})},search1:function(){var t=this;this.loading=!0,this.$get("channels?sort=-id",{status:this.status?this.status:"1",name:this.p_name?this.p_name:""}).then(function(e){1===e.code?(t.tableData=JSON.parse(o()(e.info.items)),t.pages=e.info._meta.pageCount):t.$message.error("数据加载失败"),t.loading=!1}).catch(function(){t.loading=!1})},onCopy:function(t){this.$message({message:"复制链接成功",type:"success"})},onError:function(t){console.log(t)},copy:function(){var t=new Clipboard(".tag-read");t.on("success",function(e){console.log("复制成功"),t.destroy()}),t.on("error",function(e){console.log("该浏览器不支持自动复制"),t.destroy()})},openimg:function(){console.log(111)},handleStatus:function(t,e){var a=this;e.status=!e.status,0==e.status?e.status=0:e.status=1,this.$put("channels/"+e.id,{status:e.status}).then(function(t){a.loading=!1,a.search1()}).catch(function(){a.loading=!1})},handleEdit:function(t,e){var a=this;this.$del("channels/"+t.id,{}).then(function(t){1===t.code?(a.$message({message:"删除成功",type:"success"}),a.getlistdata()):a.$message.error("数据加载失败"),a.loading=!1}).catch(function(){a.loading=!1})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table",attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"container-title"},[t._v("渠道列表")]),t._v(" "),a("div",{staticClass:"mgb20"},[a("router-link",{attrs:{to:{path:"addcanal"}}},[a("el-button",{attrs:{type:"primary"}},[t._v("+新增渠道")])],1),t._v(" "),a("span",[t._v(" 渠道登录后台地址： \n                    "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击复制",placement:"top"}},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.channelurl,expression:"channelurl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticStyle:{color:"#3c8dbc",cursor:"pointer"}},[t._v("c.loan.xykj1.com")])])],1),t._v(" "),a("el-row",{staticStyle:{float:"right"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"true"},on:{change:t.search1},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-option",{attrs:{label:"已下架",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"已上架",value:"1"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入名称",clearable:"true"},on:{change:t.search1},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.p_name,callback:function(e){t.p_name="string"==typeof e?e.trim():e},expression:"p_name"}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:t.tableData,border:"",size:"medium",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"渠道名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"url",label:"投放链接",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.url,expression:"scope.row.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.row.url))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"admin_name",label:"渠道联系人",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cooperation_type",label:"合作方式",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"qrcode",label:"渠道下载二维码",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"head_pic",attrs:{src:e.row.qrcode,width:"40",height:"40"},on:{click:function(e){t.dialogVisible=!0}}}),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"15vh"},attrs:{visible:t.dialogVisible,width:"20%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticStyle:{"margin-top":"-23px"},attrs:{src:e.row.qrcode,alt:""}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{width:"40px",height:"40px"},on:{click:function(a){return t.handleStatus(e.$index,e.row)}}},[e.row.status?a("i",{staticClass:"el-icon-check"}):t._e(),t._v(" "),e.row.status?t._e():a("i",{staticClass:"el-icon-close"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"addcanal",query:{id:e.row.id}}}},[a("el-button",{attrs:{size:"mini"}},[t._v("\n                               编辑\n                            ")])],1),t._v(" "),a("router-link",{attrs:{to:{path:"dailycanalstatistics",query:{id:e.row.id}}}},[a("el-button",{attrs:{size:"mini"}},[t._v("\n                                今日统计\n                            ")])],1),t._v(" "),a("router-link",{attrs:{to:{path:"channeldaylog",query:{id:e.row.id}}}},[a("el-button",{attrs:{size:"mini"}},[t._v("\n                                渠道统计\n                            ")])],1),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-count":t.pages},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var p=a("C7Lr")(c,u,!1,function(t){a("wILC")},"data-v-03b5e40e",null);e.default=p.exports}});