webpackJsonp([6],{"Pvk/":function(a,t){},a52u:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("s0m6"),i=e("u3k1"),n=e.n(i),r={name:"DashboardAdmin",components:{G2Line:s.a},data:function(){return{linechartData:[],listdata:"",bardata:"",des:"",tipdata:"",userdata:""}},created:function(){this.getlinedata(),this.getlistdata(),this.getbardata(),this.getuserdata()},mounted:function(){var a=this;setTimeout(function(){a.draw()},500),this.timer=setInterval(a.getlistdata(),a.getbardata(),2e4)},destroyed:function(){clearInterval(this.timer),this.timer=null},methods:{getlinedata:function(){var a=this;this.$get("index/channel-analysis").then(function(t){console.log(t);var e,s=t.info;a.linechartData=(e=[],function a(t){for(var s=0;s<t.length;s++)Array.isArray(t[s])?a(t[s]):e.push(t[s]);return e})(s),console.log(a.linechartData),a.loading=!1}).catch(function(){a.loading=!1})},handleSetLineChartData:function(a){this.lineChartData=lineChartData[a]},getlistdata:function(){var a=this;this.$get("index/index").then(function(t){1===t.code?a.listdata=t.info:a.$message.error("数据加载失败"),a.loading=!1}).catch(function(){a.loading=!1})},getbardata:function(){var a=this;this.$get("index/channels").then(function(t){1===t.code?a.bardata=t.info:a.$message.error("数据加载失败"),a.loading=!1}).catch(function(){a.loading=!1})},getuserdata:function(){var a=this;this.$get("index/user").then(function(t){1===t.code?(a.userdata=t.info,console.log(a.userdata)):a.$message.error("数据加载失败"),a.loading=!1}).catch(function(){a.loading=!1})},draw:function(){var a;a=this.bardata;var t=n.a.Shape;t.registerShape("interval","textInterval",{draw:function(a,t){var e=this.parsePoints(a.points),s=a.origin._origin.value;return t.addShape("text",{attrs:{text:s,textAlign:"center",x:e[1].x+a.size/2,y:e[1].y,fontFamily:"PingFang SC",fontSize:12,fill:"#BBB"}}),t.addShape("polygon",{attrs:{points:e.map(function(a){return[a.x,a.y]}),fill:a.color}})}}),t.registerShape("interval","fallFlag",{getPoints:function(a){var t=a.x,e=a.y,s=a.y0,i=a.size;return[{x:t+i,y:s+i},{x:t,y:e}]},draw:function(t,e){if(t.origin._origin!==a[a.length-1]){var s=this.parsePoints(t.points)[0],i=t.origin._origin.washaway;return e.addShape("text",{attrs:{text:(100*i).toFixed(1)+" %",x:s.x-4.5-14,y:s.y-14,fontFamily:"PingFang SC",fontSize:12,fill:"#BBB"}}),e.addShape("image",{attrs:{x:s.x-16,y:s.y-16,img:"https://zos.alipayobjects.com/rmsportal/JuBdciUyUAkewNAetxtS.png",width:32,height:32}})}}});var e=new n.a.Chart({container:"mountNode",forceFit:!0,height:500});e.legend(!1),e.source(a,{value:{alias:"数量"},name:{alias:"步骤名称"}}),e.axis("name",{title:null}),e.interval().position("name*value").shape("textInterval").color("name",["#1aadbf","#1aadbf","#1aadbf"]).size(30),e.interval().position("name*value").color("#E4E4E4").shape("fallFlag"),e.coord().transpose(),e.render()}}},l={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"dashboard-editor-container"},[e("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel",on:{click:function(t){return a.handleSetLineChartData("newVisitis")}}},[e("div",{staticClass:"card-panel-icon-wrapper icon-people"}),a._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[a._v("\n                    总用户人数\n                ")]),a._v(" "),e("div",{staticClass:"card-panel-text"},[a._v("\n                    "+a._s(a.listdata.user_total)+"\n                  ")])])])]),a._v(" "),e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel",on:{click:function(t){return a.handleSetLineChartData("messages")}}},[e("div",{staticClass:"card-panel-icon-wrapper icon-message"}),a._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[a._v("\n                    今日新增用户数\n                ")]),a._v(" "),e("div",{staticClass:"card-panel-text"},[a._v("\n                  "+a._s(a.listdata.user_new)+"\n                ")])])])]),a._v(" "),e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel",on:{click:function(t){return a.handleSetLineChartData("purchases")}}},[e("div",{staticClass:"card-panel-icon-wrapper icon-money"}),a._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[a._v("\n                    今日产品UV\n                ")]),a._v(" "),e("div",{staticClass:"card-panel-text"},[a._v("\n                  "+a._s(a.listdata.pdt_uv)+"\n                ")])])])]),a._v(" "),e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel",on:{click:function(t){return a.handleSetLineChartData("shoppings")}}},[e("div",{staticClass:"card-panel-icon-wrapper icon-shopping"}),a._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[a._v("\n                    新客UV\n                ")]),a._v(" "),e("div",{staticClass:"card-panel-text"},[a._v("\n                  "+a._s(a.listdata.act_uv)+"\n                ")])])])])],1),a._v(" "),e("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel",on:{click:function(t){return a.handleSetLineChartData("newVisitis")}}},[e("div",{staticClass:"card-panel-icon-wrapper icon-people"}),a._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[a._v("\n                    今日刷单数\n                ")]),a._v(" "),e("div",{staticClass:"card-panel-text"},[a._v("\n                    "+a._s(a.listdata.click_farm)+"\n                  ")])])])]),a._v(" "),e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel",on:{click:function(t){return a.handleSetLineChartData("messages")}}},[e("div",{staticClass:"card-panel-icon-wrapper icon-message"}),a._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[a._v("\n                      意向用户\n                  ")]),a._v(" "),e("div",{staticClass:"card-panel-text"},[a._v("\n                      "+a._s(a.userdata.latent)+"\n                    ")])])])]),a._v(" "),e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel",on:{click:function(t){return a.handleSetLineChartData("purchases")}}},[e("div",{staticClass:"card-panel-icon-wrapper icon-money"}),a._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[a._v("\n                      黑名单用户\n                  ")]),a._v(" "),e("div",{staticClass:"card-panel-text"},[a._v("\n                      "+a._s(a.userdata.total_black)+"\n                    ")])])])]),a._v(" "),e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel",on:{click:function(t){return a.handleSetLineChartData("shoppings")}}},[e("div",{staticClass:"card-panel-icon-wrapper icon-shopping"}),a._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[a._v("\n                      极黑用户\n                  ")]),a._v(" "),e("div",{staticClass:"card-panel-text"},[a._v("\n                      "+a._s(a.userdata.very_black)+"\n                    ")])])])])],1),a._v(" "),e("el-row",{attrs:{gutter:32}},[e("el-col",{attrs:{xs:24,sm:24,lg:14}},[e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"container-title"},[a._v("七日趋势")]),a._v(" "),e("g2-line",{attrs:{charData:a.linechartData,id:"c2"}})],1)]),a._v(" "),e("el-col",{attrs:{xs:24,sm:24,lg:10}},[e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"container-title"},[a._v("今日渠道转化")]),a._v(" "),e("div",{attrs:{id:"mountNode"}})])])],1),a._v(" "),e("el-alert",{staticStyle:{position:"fixed",top:"70px",right:"0px",width:"300px",height:"100px",float:"right"},attrs:{type:"success"}},[[e("div",{staticStyle:{"font-size":"14px"}},[e("p",{staticStyle:{float:"right"}},[a._v("今日UV数/昨日UV数:"+a._s(a.listdata.pdt_uv)+"/"+a._s(a.listdata.last_pdt_uv))]),a._v(" "),e("p",{staticStyle:{"margin-top":"10px",float:"right"}},[a._v("今日UV效率/昨日UV效率:"+a._s(a.listdata.pre)+"/"+a._s(a.listdata.last_pre))])])]],2)],1)},staticRenderFns:[]};var c=e("C7Lr")(r,l,!1,function(a){e("oIIO")},"data-v-49b781cb",null);t.default=c.exports},oIIO:function(a,t){},s0m6:function(a,t,e){"use strict";var s=e("u3k1"),i=e.n(s),n={data:function(){return{chart:null}},props:{charData:{type:Array,default:function(){return{data:[]}}},id:String},watch:{charData:function(a,t){console.log("new: %s, old: %s",a,t),this.drawChart(a)}},methods:{drawChart:function(){this.chart=new i.a.Chart({container:this.id,forceFit:!0}),this.chart.source(this.charData,{year:{type:"timeCat",range:[0,1]}}),this.chart.axis("date",{label:{textStyle:{fill:"#aaaaaa"}}}),this.chart.axis("value",{label:{textStyle:{fill:"#aaaaaa"},formatter:function(a){return a.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}}}),this.chart.line().position("date*value").color("name",["#36cfc9","#9AD681","#4FAAEB","#facc14","#bae637","#73d13d","#36cfc9","#40a9ff"]),this.chart.render()}}},r={render:function(){var a=this.$createElement;return(this._self._c||a)("div",{attrs:{id:this.id}})},staticRenderFns:[]};var l=e("C7Lr")(n,r,!1,function(a){e("Pvk/")},"data-v-6aed95fe",null);t.a=l.exports}});